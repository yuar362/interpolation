#include "Interpolation.h"
#include "Method.h"

#include <stdexcept>

std::shared_ptr<IMethod> Interpolation::createMethod(MehthodEnum method_)
{
	switch (method_)
	{
		case STEP:
		{
			return std::shared_ptr<IMethod>(new StepMetod());
		}
		case LINEAR:
		{
			return std::shared_ptr<IMethod>(new LinearMethod());
		}
		case QUADRATIÑ:
		{
			return std::shared_ptr<IMethod>(new QuadraticMethod());
		}
	}
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Interpolation::Interpolation() : m_method(createMethod(LINEAR))
{
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
Interpolation::Interpolation(MehthodEnum method_) : m_method(createMethod(method_))
{
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Interpolation::readReferencePoints(const std::string & file_name_)
{
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Interpolation::readPoints(const std::string & file_name_)
{
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Interpolation::calculate()
{
	if (!m_points_x.size())
	{
		throw(std::logic_error("There are no points coordinates!"));
	}
	if (m_reference_points.empty())
	{
		throw(std::logic_error("There are no reference points!"));
	}

	m_points_y.clear();
	m_points_y.reserve(m_points_x.size());
	m_method->calculate(m_reference_points, m_points_x, m_points_y);
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Interpolation::writeData(const std::string & file_name_) const
{
	if (!m_points_y.size())
	{
		throw(std::logic_error("There is no interpolation!"));
	}
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Interpolation::setMethod(MehthodEnum method_)
{
	m_method = createMethod(method_);
}
